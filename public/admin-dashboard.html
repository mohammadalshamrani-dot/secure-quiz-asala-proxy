<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لوحة الإدارة</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
<h1>لوحة الإدارة</h1>
<section><h2>طلبات التسجيل</h2><div id="pending"></div></section>
<section><h2>الاختبارات المنشأة</h2><div id="quizzes"></div></section>
</div>
<script>
async function loadPending(){
 const r=await fetch('/api/admin/pending');
 const d=await r.json();
 document.getElementById('pending').innerHTML=d.map(t=>`<div>${t.username} (${t.email}) <button onclick="approve(${t.id},true)">قبول</button> <button onclick="approve(${t.id},false)">رفض</button></div>`).join('');
}
async function loadQuizzes(){
 const r=await fetch('/api/admin/quizzes');
 const d=await r.json();
 document.getElementById('quizzes').innerHTML=d.map(q=>`<div><b>${q.title}</b> - ${q.username} (${q.created_at})</div>`).join('');
}
async function approve(id,approve){
 await fetch('/api/admin/teachers/'+id+'/approve',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({approve})});
 loadPending();
}
loadPending();
loadQuizzes();
</script>
</body>
</html>