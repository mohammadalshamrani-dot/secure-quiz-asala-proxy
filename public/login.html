<!doctype html>
<html lang="ar" dir="rtl">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>دخول المدرّس</title><link rel="stylesheet" href="./style.css"></head>
<body><main class="wrapper"><section class="hero-card">
<h1>دخول أعضاء هيئة التدريس</h1>
<div class="form-card">
  <label>اسم المستخدم أو البريد</label><input id="u">
  <label>كلمة المرور</label><input id="p" type="password">
  <div class="row" style="margin-top:10px">
    <button class="btn btn-prim" onclick="login()">دخول</button>
    <a class="btn btn-ghost" href="./index.html">الرئيسية</a>
    <a class="btn" href="./reset.html">نسيت كلمة المرور؟</a>
    <a class="btn" href="./signup.html">تسجيل جديد</a>
  </div>
</div>
</section></main>
<script>
function login(){
  fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ username: u.value.trim(), password: p.value })})
    .then(r=>r.json()).then(d=>{
      if(!d.ok){ alert(d.error==='not approved'?'حسابك بانتظار موافقة الإدارة':'بيانات غير صحيحة'); return; }
      localStorage.setItem('token', d.token);
      location.href='./dashboard.html';
    }).catch(()=> alert('تعذر الاتصال'));
}
</script></body></html>
