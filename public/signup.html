<!doctype html><html lang="ar" dir="rtl"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>تسجيل عضو هيئة التدريس</title><link rel="stylesheet" href="./style.css"></head><body><header class="header">
  <div class="brand"><img class="logo" src="./assets/logo-alasala.png"><div class="title">كليات الأصالة – منصة الاختبارات</div></div>
  <nav class="nav">
    <a class="navlink" href="./home.html">الرئيسية</a>
    <a class="navlink" href="./instructions.html">تعليمات سريعة</a>
    <a class="navlink" href="./login.html">دخول أعضاء هيئة التدريس</a>
    <a class="navlink" href="./contact.html">تواصل مع الإدارة</a>
    <a class="navlink" href="./admin-login.html">الإدارة</a>
  </nav>
</header>
<main class="wrapper"><section class="hero-card"><h1>تسجيل جديد</h1>
<div class="form-card">
<label>البريد الجامعي</label><input id="email">
<label>اسم المستخدم</label><input id="username">
<label>كلمة المرور</label><input id="password" type="password">
<div class="row"><button class="btn btn-prim" onclick="go()">تسجيل</button><a class="btn btn-ghost" href="./login.html">عودة</a></div>
<div id="out" class="sub"></div></div></section></main><footer class="footer">منصة الاختبارات القصيرة – كليات الأصالة | تطوير: د. محمد الشمراني</footer>
<script>
function go(){
 const body={email:email.value.trim(),username:username.value.trim(),password:password.value};
 fetch('/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)})
  .then(r=>r.json()).then(d=>{out.textContent=d.ok?'تم إرسال طلبك للموافقة.':'تعذر التسجيل أو البيانات مستخدمة.';}).catch(()=>out.textContent='تعذّر الاتصال بالخادم');
}
</script>
<script>
async function wakeServer(retries=3){
  for(let i=0;i<retries;i++){
    try{
      const ac = new AbortController();
      const t = setTimeout(()=>ac.abort(), 4000);
      const r = await fetch('/api/health',{signal:ac.signal});
      clearTimeout(t);
      if(r.ok){ return true; }
    }catch(e){ /* try again */ }
    await new Promise(res=>setTimeout(res, 1200));
  }
  return false;
}
</script>
</body></html>