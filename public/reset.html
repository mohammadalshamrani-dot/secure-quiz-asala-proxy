<!doctype html>
<html lang="ar" dir="rtl">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>استرجاع كلمة المرور</title><link rel="stylesheet" href="./style.css"></head>
<body><main class="wrapper"><section class="hero-card">
<h1>استرجاع كلمة المرور</h1>
<div class="form-card">
  <label>البريد الإلكتروني الجامعي</label><input id="email" placeholder="example@alasala.edu.sa">
  <label>اسم المستخدم</label><input id="username" placeholder="username">
  <div class="row" style="margin-top:10px">
    <button class="btn btn-prim" onclick="resetPass()">إرسال كلمة مرور جديدة</button>
    <a class="btn btn-ghost" href="./login.html">العودة</a>
  </div>
  <div id="out" class="sub"></div>
</div>
</section></main>
<script>
function resetPass(){
  fetch('/api/auth/reset',{method:'POST',headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ email: email.value.trim(), username: username.value.trim() })})
    .then(r=>r.json()).then(d=>{
      if(!d.ok){ out.textContent='تعذر الإرسال: '+(d.error||''); return; }
      out.textContent='تم إرسال كلمة مرور مؤقتة إلى بريدك.';
    }).catch(()=> out.textContent='تعذر الاتصال');
}
</script></body></html>
